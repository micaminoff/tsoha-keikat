{% extends "layout.html" %}
{% from 'field_macro.html' import render_field %}

{% block body %}
<section class="section">
    <form method="POST" action="{{ url_for('events_create') }}">

        <!--
            render_field() is a macro to enforce DRY between event modification and creation
            reference: https://flask.palletsprojects.com/en/1.1.x/patterns/wtforms/
        -->

        {{render_field(form.name)}}

        <div class='field'>
            {% for performer in form.performers %}
                {{ performer.label(class_='label') }}
                {{ performer(class_='select') }}
            {% endfor %}
        </div>
        <button class='button is-info' id='add_performer'>Add another</button>

        {% if form.performers.errors %}
        <ul class='errors'>
            {% for error in form.performers.errors %}
            <li><span class='is-danger tag'>{{error}}</span></li>
            {% endfor %}
        </ul>
        {% endif %}
        {{render_field(form.venue)}}

        {{render_field(form.date, type='date')}}

        <div class="field">
            <input class="button is-info" type="submit" value="Add a new Event" />
        </div>
    </form>
</section>
{% endblock %}